var cov_1xen7zv4us=function(){var path="/Users/dmiller/recurly/v3/clients/node/lib/recurly/schemas.js";var hash="4015f9601bd265bb4a8a5ad0e0e080984d9303d8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/dmiller/recurly/v3/clients/node/lib/recurly/schemas.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:39}},"1":{start:{line:2,column:14},end:{line:2,column:32}},"2":{start:{line:14,column:4},end:{line:14,column:15}},"3":{start:{line:18,column:4},end:{line:18,column:16}},"4":{start:{line:27,column:4},end:{line:27,column:36}},"5":{start:{line:30,column:4},end:{line:30,column:26}},"6":{start:{line:39,column:4},end:{line:39,column:20}},"7":{start:{line:43,column:4},end:{line:43,column:42}},"8":{start:{line:43,column:30},end:{line:43,column:42}},"9":{start:{line:44,column:4},end:{line:44,column:36}},"10":{start:{line:48,column:4},end:{line:48,column:32}},"11":{start:{line:59,column:4},end:{line:59,column:20}},"12":{start:{line:63,column:4},end:{line:63,column:43}},"13":{start:{line:63,column:31},end:{line:63,column:43}},"14":{start:{line:64,column:4},end:{line:64,column:39}},"15":{start:{line:64,column:28},end:{line:64,column:39}},"16":{start:{line:65,column:4},end:{line:65,column:38}},"17":{start:{line:69,column:4},end:{line:69,column:44}},"18":{start:{line:69,column:26},end:{line:69,column:43}},"19":{start:{line:79,column:4},end:{line:89,column:5}},"20":{start:{line:80,column:6},end:{line:80,column:65}},"21":{start:{line:81,column:11},end:{line:89,column:5}},"22":{start:{line:82,column:6},end:{line:82,column:58}},"23":{start:{line:83,column:11},end:{line:89,column:5}},"24":{start:{line:84,column:6},end:{line:84,column:31}},"25":{start:{line:85,column:11},end:{line:89,column:5}},"26":{start:{line:86,column:6},end:{line:86,column:36}},"27":{start:{line:88,column:6},end:{line:88,column:70}},"28":{start:{line:100,column:4},end:{line:100,column:68}},"29":{start:{line:104,column:20},end:{line:104,column:44}},"30":{start:{line:105,column:4},end:{line:105,column:28}},"31":{start:{line:106,column:4},end:{line:106,column:24}},"32":{start:{line:107,column:4},end:{line:109,column:6}},"33":{start:{line:108,column:6},end:{line:108,column:59}},"34":{start:{line:113,column:14},end:{line:113,column:23}},"35":{start:{line:114,column:21},end:{line:114,column:28}},"36":{start:{line:116,column:4},end:{line:142,column:5}},"37":{start:{line:117,column:20},end:{line:117,column:28}},"38":{start:{line:118,column:21},end:{line:118,column:40}},"39":{start:{line:119,column:27},end:{line:119,column:50}},"40":{start:{line:121,column:6},end:{line:139,column:7}},"41":{start:{line:124,column:8},end:{line:136,column:9}},"42":{start:{line:125,column:10},end:{line:125,column:33}},"43":{start:{line:128,column:10},end:{line:133,column:11}},"44":{start:{line:129,column:12},end:{line:129,column:55}},"45":{start:{line:131,column:17},end:{line:133,column:11}},"46":{start:{line:132,column:12},end:{line:132,column:136}},"47":{start:{line:137,column:13},end:{line:139,column:7}},"48":{start:{line:138,column:8},end:{line:138,column:114}},"49":{start:{line:144,column:4},end:{line:144,column:19}},"50":{start:{line:148,column:0},end:{line:148,column:30}},"51":{start:{line:149,column:0},end:{line:149,column:34}},"52":{start:{line:150,column:0},end:{line:150,column:50}},"53":{start:{line:151,column:0},end:{line:151,column:44}},"54":{start:{line:152,column:0},end:{line:152,column:52}},"55":{start:{line:153,column:0},end:{line:153,column:42}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:18},end:{line:15,column:3}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:15},end:{line:19,column:3}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:18},end:{line:28,column:3}},line:26},"3":{name:"(anonymous_3)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:15},end:{line:31,column:3}},line:29},"4":{name:"(anonymous_4)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:21},end:{line:40,column:3}},line:38},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:18},end:{line:45,column:3}},line:42},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:15},end:{line:49,column:3}},line:47},"7":{name:"(anonymous_7)",decl:{start:{line:58,column:2},end:{line:58,column:3}},loc:{start:{line:58,column:21},end:{line:60,column:3}},line:58},"8":{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:66,column:3}},line:62},"9":{name:"(anonymous_9)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:15},end:{line:70,column:3}},line:68},"10":{name:"(anonymous_10)",decl:{start:{line:69,column:21},end:{line:69,column:22}},loc:{start:{line:69,column:26},end:{line:69,column:43}},line:69},"11":{name:"(anonymous_11)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:25},end:{line:90,column:3}},line:78},"12":{name:"(anonymous_12)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:31},end:{line:101,column:3}},line:99},"13":{name:"(anonymous_13)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:29},end:{line:110,column:3}},line:103},"14":{name:"(anonymous_14)",decl:{start:{line:107,column:33},end:{line:107,column:34}},loc:{start:{line:107,column:41},end:{line:109,column:5}},line:107},"15":{name:"(anonymous_15)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:13},end:{line:145,column:3}},line:112}},branchMap:{"0":{loc:{start:{line:43,column:4},end:{line:43,column:42}},type:"if",locations:[{start:{line:43,column:4},end:{line:43,column:42}},{start:{line:43,column:4},end:{line:43,column:42}}],line:43},"1":{loc:{start:{line:63,column:4},end:{line:63,column:43}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:43}},{start:{line:63,column:4},end:{line:63,column:43}}],line:63},"2":{loc:{start:{line:64,column:4},end:{line:64,column:39}},type:"if",locations:[{start:{line:64,column:4},end:{line:64,column:39}},{start:{line:64,column:4},end:{line:64,column:39}}],line:64},"3":{loc:{start:{line:79,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:89,column:5}},{start:{line:79,column:4},end:{line:89,column:5}}],line:79},"4":{loc:{start:{line:81,column:11},end:{line:89,column:5}},type:"if",locations:[{start:{line:81,column:11},end:{line:89,column:5}},{start:{line:81,column:11},end:{line:89,column:5}}],line:81},"5":{loc:{start:{line:81,column:15},end:{line:81,column:93}},type:"binary-expr",locations:[{start:{line:81,column:15},end:{line:81,column:37}},{start:{line:81,column:41},end:{line:81,column:59}},{start:{line:81,column:63},end:{line:81,column:93}}],line:81},"6":{loc:{start:{line:83,column:11},end:{line:89,column:5}},type:"if",locations:[{start:{line:83,column:11},end:{line:89,column:5}},{start:{line:83,column:11},end:{line:89,column:5}}],line:83},"7":{loc:{start:{line:85,column:11},end:{line:89,column:5}},type:"if",locations:[{start:{line:85,column:11},end:{line:89,column:5}},{start:{line:85,column:11},end:{line:89,column:5}}],line:85},"8":{loc:{start:{line:121,column:6},end:{line:139,column:7}},type:"if",locations:[{start:{line:121,column:6},end:{line:139,column:7}},{start:{line:121,column:6},end:{line:139,column:7}}],line:121},"9":{loc:{start:{line:124,column:8},end:{line:136,column:9}},type:"if",locations:[{start:{line:124,column:8},end:{line:136,column:9}},{start:{line:124,column:8},end:{line:136,column:9}}],line:124},"10":{loc:{start:{line:128,column:10},end:{line:133,column:11}},type:"if",locations:[{start:{line:128,column:10},end:{line:133,column:11}},{start:{line:128,column:10},end:{line:133,column:11}}],line:128},"11":{loc:{start:{line:131,column:17},end:{line:133,column:11}},type:"if",locations:[{start:{line:131,column:17},end:{line:133,column:11}},{start:{line:131,column:17},end:{line:133,column:11}}],line:131},"12":{loc:{start:{line:137,column:13},end:{line:139,column:7}},type:"if",locations:[{start:{line:137,column:13},end:{line:139,column:7}},{start:{line:137,column:13},end:{line:139,column:7}}],line:137}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"4015f9601bd265bb4a8a5ad0e0e080984d9303d8"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();const inspect=(cov_1xen7zv4us.s[0]++,require('util').inspect);const utils=(cov_1xen7zv4us.s[1]++,require('./utils'));/**
 * Represents a primitive:
 *   - String
 *   - Number
 *   - Boolean
 *   - Object (plain js object)
 *   - Array (of primitives only)
 */class PrimitiveProperty{isValid(value){cov_1xen7zv4us.f[0]++;cov_1xen7zv4us.s[2]++;return true;}cast(value){cov_1xen7zv4us.f[1]++;cov_1xen7zv4us.s[3]++;return value;}}/**
 * Represents a Date in the schema
 */class DateProperty{isValid(value){cov_1xen7zv4us.f[2]++;cov_1xen7zv4us.s[4]++;return typeof value==='string';}cast(value){cov_1xen7zv4us.f[3]++;cov_1xen7zv4us.s[5]++;return new Date(value);}}/**
 * Represents an embedded Resource in the schema
 */class ResourceProperty{constructor(type){cov_1xen7zv4us.f[4]++;cov_1xen7zv4us.s[6]++;this.type=type;}isValid(value){cov_1xen7zv4us.f[5]++;cov_1xen7zv4us.s[7]++;if(Array.isArray(value)){cov_1xen7zv4us.b[0][0]++;cov_1xen7zv4us.s[8]++;return false;}else{cov_1xen7zv4us.b[0][1]++;}cov_1xen7zv4us.s[9]++;return typeof value==='object';}cast(value){cov_1xen7zv4us.f[6]++;cov_1xen7zv4us.s[10]++;return this.type.cast(value);}}/**
 * Represents an array of other schema properties.
 *
 * @param {Property} type - Should be Property for element type
 */class ArrayProperty{constructor(type){cov_1xen7zv4us.f[7]++;cov_1xen7zv4us.s[11]++;this.type=type;}isValid(value){cov_1xen7zv4us.f[8]++;cov_1xen7zv4us.s[12]++;if(!Array.isArray(value)){cov_1xen7zv4us.b[1][0]++;cov_1xen7zv4us.s[13]++;return false;}else{cov_1xen7zv4us.b[1][1]++;}cov_1xen7zv4us.s[14]++;if(value.length===0){cov_1xen7zv4us.b[2][0]++;cov_1xen7zv4us.s[15]++;return true;}else{cov_1xen7zv4us.b[2][1]++;}cov_1xen7zv4us.s[16]++;return this.type.isValid(value[0]);}cast(value){cov_1xen7zv4us.f[9]++;cov_1xen7zv4us.s[17]++;return value.map(v=>{cov_1xen7zv4us.f[10]++;cov_1xen7zv4us.s[18]++;return this.type.cast(v);});}}class Property{/**
   * Factory method to build a Property from a type signature.
   * You should only create Properties through this method.
   */static build(typeSig){cov_1xen7zv4us.f[11]++;cov_1xen7zv4us.s[19]++;if(typeof typeSig==='string'){cov_1xen7zv4us.b[3][0]++;cov_1xen7zv4us.s[20]++;return new ResourceProperty(Schema.locateResource(typeSig));}else{cov_1xen7zv4us.b[3][1]++;cov_1xen7zv4us.s[21]++;if((cov_1xen7zv4us.b[5][0]++,Array.isArray(typeSig))&&(cov_1xen7zv4us.b[5][1]++,typeSig.length>0)&&(cov_1xen7zv4us.b[5][2]++,typeof typeSig[0]==='string')){cov_1xen7zv4us.b[4][0]++;cov_1xen7zv4us.s[22]++;return new ArrayProperty(Property.build(typeSig[0]));}else{cov_1xen7zv4us.b[4][1]++;cov_1xen7zv4us.s[23]++;if(typeSig===Date){cov_1xen7zv4us.b[6][0]++;cov_1xen7zv4us.s[24]++;return new DateProperty();}else{cov_1xen7zv4us.b[6][1]++;cov_1xen7zv4us.s[25]++;if([String,Number,Boolean,Date,Array,Object].includes(typeSig)){cov_1xen7zv4us.b[7][0]++;cov_1xen7zv4us.s[26]++;return new PrimitiveProperty();}else{cov_1xen7zv4us.b[7][1]++;cov_1xen7zv4us.s[27]++;throw new Error(`Type Signature ${inspect(typeSig)} is invalid`);}}}}}}/**
 * The class responsible a compiled schema.
 *
 * @param {Resource} resourceType - the resource type
 */class Schema{static locateResource(name){cov_1xen7zv4us.f[12]++;cov_1xen7zv4us.s[28]++;throw new Error('Schema.locateResource needs an implementation');}constructor(resourceType){cov_1xen7zv4us.f[13]++;const options=(cov_1xen7zv4us.s[29]++,resourceType.getSchema());cov_1xen7zv4us.s[30]++;this.type=resourceType;cov_1xen7zv4us.s[31]++;this.properties={};cov_1xen7zv4us.s[32]++;Object.keys(options).forEach(name=>{cov_1xen7zv4us.f[14]++;cov_1xen7zv4us.s[33]++;this.properties[name]=Property.build(options[name]);});}cast(obj){cov_1xen7zv4us.f[15]++;const T=(cov_1xen7zv4us.s[34]++,this.type);const resource=(cov_1xen7zv4us.s[35]++,new T());cov_1xen7zv4us.s[36]++;for(let key in obj){const value=(cov_1xen7zv4us.s[37]++,obj[key]);const newKey=(cov_1xen7zv4us.s[38]++,utils.camelize(key));const propertyType=(cov_1xen7zv4us.s[39]++,this.properties[newKey]);cov_1xen7zv4us.s[40]++;if(propertyType){cov_1xen7zv4us.b[8][0]++;cov_1xen7zv4us.s[41]++;// if it's a null, just set to null on the resource
// null is a valid value for any property type
if(value===null){cov_1xen7zv4us.b[9][0]++;cov_1xen7zv4us.s[42]++;resource[newKey]=null;}else{cov_1xen7zv4us.b[9][1]++;cov_1xen7zv4us.s[43]++;// If it's valid, cast and set it
if(propertyType.isValid(value)){cov_1xen7zv4us.b[10][0]++;cov_1xen7zv4us.s[44]++;resource[newKey]=propertyType.cast(value);// if it's not valid and we are in strict-mode, explode
}else{cov_1xen7zv4us.b[10][1]++;cov_1xen7zv4us.s[45]++;if(utils.STRICT_MODE){cov_1xen7zv4us.b[11][0]++;cov_1xen7zv4us.s[46]++;throw new Error(`${T.name} could not map value pair ${newKey} => ${inspect(value)} to schema type ${inspect(propertyType)}`);}else{cov_1xen7zv4us.b[11][1]++;}}// else we leave resource[newKey] undefined
// this prevents the programmer from accidentally relying on it
}}else{cov_1xen7zv4us.b[8][1]++;cov_1xen7zv4us.s[47]++;if(utils.STRICT_MODE){cov_1xen7zv4us.b[12][0]++;cov_1xen7zv4us.s[48]++;throw new Error(`${T.name} could not find schema property for value pair: ${newKey} => ${inspect(value)}`);}else{cov_1xen7zv4us.b[12][1]++;}}// else we leave resource[newKey] undefined
// this prevents the programmer from accidentally relying on it
}cov_1xen7zv4us.s[49]++;return resource;}}cov_1xen7zv4us.s[50]++;module.exports.Schema=Schema;cov_1xen7zv4us.s[51]++;module.exports.Property=Property;cov_1xen7zv4us.s[52]++;module.exports.ResourceProperty=ResourceProperty;cov_1xen7zv4us.s[53]++;module.exports.ArrayProperty=ArrayProperty;cov_1xen7zv4us.s[54]++;module.exports.PrimitiveProperty=PrimitiveProperty;cov_1xen7zv4us.s[55]++;module.exports.DateProperty=DateProperty;